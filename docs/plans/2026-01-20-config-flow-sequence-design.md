# Config Flow Sequencing Design

**Goal:** Reshape the configuration panel into a three-step flow (Persona → Audience → Tweet) with explicit navigation, remove the sample dropdown in favor of a prominent shuffle action, and ensure the Expert Mode toggle renders in CRT green.

## Architecture & Components

The ConfigPanel becomes a lightweight step wizard driven by local component state (`step: 'persona' | 'audience' | 'tweet'`). The Zustand config store remains the single source of truth for user selections: persona, audience mix, tweet text, sample ID, and simulation start flag. Each step renders a dedicated section with a `data-testid` so tests can assert the step order and that only one step is visible at a time. The Persona step shows the persona grid and requires a Continue action to reach Audience, preventing implicit progression. The Audience step renders the eight sliders from the store and moves forward only through a Continue button; it also allows a Back action to avoid locking users into a state. The Tweet step presents a prefilled textarea bound to `tweetText` and a Shuffle Draft button that updates the store via `shuffleSampleTweet` without any select input, keeping the UI simple and unmistakable. Error handling is minimal and defensive: sliders clamp to 0–100 in the store, and keyboard Enter only begins simulation on the Tweet step to avoid accidental starts on earlier steps. No network or external I/O is introduced, so failures remain localized to state and DOM rendering.

## Interaction & Testing

The Expert Mode toggle is styled via `accent-color: var(--phosphor-green)` and explicit sizing to avoid the browser’s default pink/blue accents. The shuffle button is elevated with CRT glow, uppercase text, and an inline SVG icon to make it visually dominant and retro. Step navigation buttons use consistent CRT styling, with the primary action highlighted in phosphor green and the back action using amber to read as secondary. Keyboard behavior is constrained: Enter starts the simulation only when the Tweet step is active; native Tab order remains intact for accessibility. Tests assert that the wizard advances in the correct order and that sections outside the current step are not rendered. They also verify that the tweet field is prefilled with the default sample and that Shuffle updates the text when Math.random is forced. Finally, a click on the Begin Simulation button asserts that the store’s `simulationStarted` flag flips to true. This test-first approach keeps the behavior anchored to user-visible outcomes while allowing the visual layer to evolve without brittle selectors.
